#!/usr/bin/env php
<?php

require __DIR__ . '/src/Mysql.php';

$opts = \getopt('', [
    'host:',
    'username:',
    'password:',
    'database:',
    'port:',
    'socket:',
]);
$mysql = new \SlamMysql\Mysql(
    $opts['host'] ?? \ini_get('mysqli.default_host'),
    $opts['username'] ?? \ini_get('mysqli.default_user'),
    $opts['password'] ?? \ini_get('mysqli.default_pw'),
    $opts['database'] ?? '',
    (int) ($opts['port'] ?? \ini_get('mysqli.default_port')),
    $opts['socket'] ?? \ini_get('mysqli.default_socket'),
);
$return = $mysql->run(\STDIN, \STDOUT, \STDERR);
exit((int) (true !== $return));
